<component name="EPS" kind="active" namespace="App">
    <comment>Component that manage ADCS</comment>
     <import_port_type>App/EPS/EPSPort/EPSPortAi.xml</import_port_type>
     <import_port_type>Fw/Buffer/BufferSendPortAi.xml</import_port_type>
     <import_port_type>Svc/Sched/SchedPortAi.xml</import_port_type>
    <ports>
        <port name="DataOut" data_type="App::EPSCmd" kind="output">
            <comment>
            Port for sending EPS packet
            </comment>
        </port>
        <port name="DataIn" data_type="App::EPSCmd" kind="async_input">
            <comment>
            Port for returning EPS Packet
            </comment>
        </port>
        <port name="Schedin" data_type="Sched" kind="sync_input">
            <comment>
            The rate groupe scheduler input
            </comment>
        </port>
    </ports>
    <commands>
        <command kind="async" opcode="0" mnemonic="MS_SEND_CMD">
            <comment>
            Send CMD to EPS
            </comment>
            <args>
                <arg name="operation" type="ENUM">
                    <enum name="EPSOp">
                        <item name="EPS_DIRECT_CONTROL"/>
                        <item name="EPS_CONF_MGMT"/>
                        <item name="EPS_RESET_PORT"/>
                        <item name="EPS_INST_TLM"/>
                        <item name="EPS_TIME_SYNC"/>
                    </enum>
            <comment>operation argument</comment>
        </arg>    
                <arg name="payload" type="string" size="1000">
                    <comment>The payload data</comment>
                </arg>                     
             </args>
        </command>
         <command kind="async" opcode="1" mnemonic="MS_SEND_PING">
            <comment>
            Send Ping to EPS
            </comment>
        </command>
    </commands>
    <telemetry>
        <channel id="0" name="EPS_Voltage_battery_mV" data_type="U16">
            <comment>
            Voltage
            </comment>
        </channel>
        <channel id="1" name="EPS_Battery_mode" data_type="U8">
            <comment>
            Battery mode
            </comment>
        </channel>
        <channel id="2" name="EPS_Temp_Battery_Celsuis" data_type="U16">
            <comment>
            Battery Temp
            </comment>
        </channel>
        <channel id="3" name="EPS_LAST_CMD_RETURN" data_type="string" size="1000">
            <comment>
            Battery mode
            </comment>
        </channel>
    </telemetry>
    <events>
        <event id="0" name="MS_CMD_SEND_EPS" severity="ACTIVITY_LO" format_string = "Commande send to EPS : port = %hu, cmd = %hu, data: %s" >
            <comment>
            Send cmd data
            </comment>
            <args>
                <arg name="port" type="U8">
                    <comment>The port id</comment>
                </arg>
                 <arg name="cmd" type="U8">
                    <comment>The cmd id</comment>
                </arg>
                <arg name="payload" type="string" size="1000">
                    <comment>The command data</comment>
                </arg>          
            </args>
        </event>
        <event id="1" name="MS_CMD_RECV_EPS" severity="ACTIVITY_LO" format_string = "Commande return from EPS : port = %hu, cmd = %hu, data: %s" >
            <comment>
            Received cmd data
            </comment>
            <args>
                <arg name="port" type="U8">
                    <comment>The port id</comment>
                </arg>
                <arg name="cmd" type="U8">
                    <comment>The command id</comment>
                </arg>
                <arg name="payload" type="string" size="3000">
                    <comment>The command return data</comment>
                </arg>          
            </args>
        </event>
        <event id="2" name="MS_CMD_ERROR" severity="WARNING_LO" format_string = "Error in cmd , port : %hu, cmd : %hu, status : %hhu" >
            <comment>
            cmd Error
            </comment>
            <args>
                <arg name="port" type="U8">
                    <comment>The port id</comment>
                </arg>
                <arg name="cmd" type="U8">
                    <comment>the cmd error</comment>
                </arg>
                <arg name="status" type="U8">
                    <comment>the status error</comment>
                </arg>  
            </args>
        </event>
        <event id="3" name="MS_BATT_VOLT_LOW" severity="WARNING_HI" format_string = "Warning battery voltage low : %hu mV" >
            <comment>
            low voltage
            </comment>
            <args>
                <arg name="volt" type="U16">
                    <comment>Voltage</comment>
                </arg>    
            </args>
        </event>
         <event id="4" name="MS_BATT_TEMP_HIGH" severity="WARNING_HI" format_string = "Warning battery temperature HIGH : %hu celsius" >
            <comment>
            High voltage
            </comment>
            <args>
                <arg name="temp" type="U8">
                    <comment>the id error</comment>
                </arg>    
            </args>
        </event>
        <event id="5" name="MS_CHNG_BATT_MOD" severity="WARNING_HI" format_string = "Battery mode change : %hu" >
            <comment>
            Payload Error
            </comment>
            <args>
                <arg name="mode" type="U8">
                    <comment>battery mode</comment>
                </arg>    
            </args>
        </event>
        <event id="6" name="MS_CMD_PAYLOAD_ERROR" severity="WARNING_LO" format_string = "Error in EPS command : payload : %s" >
            <comment>
            Payload Error
            </comment>
            <args>
                <arg name="payload" type="string" size="1000">
                    <comment>the payload error</comment>
                </arg>    
            </args>
        </event>
        <event id="7" name="MS_CMD_PORT_ERROR" severity="WARNING_LO" format_string = "Error in EPS command : port : %s" >
            <comment>
            Payload Error
            </comment>
            <args>
                <arg name="port" type="U8">
                    <comment>The port id</comment>
                </arg> 
            </args>
        </event>
        <event id="8" name="MS_PING" severity="ACTIVITY_LO" format_string = "Ping EPS : %d ms" >
            <comment>
            Payload Error
            </comment>
            <args>
                <arg name="port" type="I32">
                    <comment>port response ms</comment>
                </arg> 
            </args>
        </event>
    </events>
</component>